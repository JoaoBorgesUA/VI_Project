<!DOCTYPE html>
<!-- saved from url=(0052)https://getbootstrap.com/docs/5.0/examples/sidebars/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">


    

    <!-- Bootstrap core CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- Favicons -->
<link rel="apple-touch-icon" href="https://getbootstrap.com/docs/5.0/assets/img/favicons/apple-touch-icon.png" sizes="180x180">
<link rel="icon" href="https://getbootstrap.com/docs/5.0/assets/img/favicons/favicon-32x32.png" sizes="32x32" type="image/png">
<link rel="icon" href="https://getbootstrap.com/docs/5.0/assets/img/favicons/favicon-16x16.png" sizes="16x16" type="image/png">
<link rel="manifest" href="https://getbootstrap.com/docs/5.0/assets/img/favicons/manifest.json">
<link rel="mask-icon" href="https://getbootstrap.com/docs/5.0/assets/img/favicons/safari-pinned-tab.svg" color="#7952b3">
<link rel="icon" href="https://getbootstrap.com/docs/5.0/assets/img/favicons/favicon.ico">
<meta name="theme-color" content="#7952b3">

<script src="https://d3js.org/d3.v4.js"></script>
    <style>
      .bd-placeholder-img {
        font-size: 1.125rem;
        text-anchor: middle;
        -webkit-user-select: none;
        -moz-user-select: none;
        user-select: none;
      }

      @media (min-width: 768px) {
        .bd-placeholder-img-lg {
          font-size: 3.5rem;
        }
      }
    </style>

    
    <!-- Custom styles for this template -->
    <link href="./Sidebars Â· Bootstrap v5.0_files/sidebars.css" rel="stylesheet">
  </head>
  <body>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="googleplay" viewBox="0 0 25 25">
    <title>Google Play Statistics</title>
    <path d="M22.018 13.298l-3.919 2.218-3.515-3.493 3.543-3.521 3.891 2.202a1.49 1.49 0 0 1 0 2.594zM1.337.924a1.486 1.486 0 0 0-.112.568v21.017c0 .217.045.419.124.6l11.155-11.087L1.337.924zm12.207 10.065l3.258-3.238L3.45.195a1.466 1.466 0 0 0-.946-.179l11.04 10.973zm0 2.067l-11 10.933c.298.036.612-.016.906-.183l13.324-7.54-3.23-3.21z"></path>
  </symbol>
  <symbol id="piechart" viewBox="0 0 22 25">
    <path d="M12 22C6.477 22 2 17.523 2 12c0-4.478 2.943-8.268 7-9.542v2.124A8.003 8.003 0 0 0 12 20a8.003 8.003 0 0 0 7.418-5h2.124c-1.274 4.057-5.064 7-9.542 7zm9.95-9H11V2.05c.329-.033.663-.05 1-.05 5.523 0 10 4.477 10 10 0 .337-.017.671-.05 1zM13 4.062V11h6.938A8.004 8.004 0 0 0 13 4.062z"></path>
  </symbol>
  <symbol id="barchart" viewBox="0 0 16 16">
    <path d="M4 11H2v3h2v-3zm5-4H7v7h2V7zm5-5v12h-2V2h2zm-2-1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h2a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1h-2zM6 7a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v7a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7zm-5 4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1v-3z"></path>
  </symbol>
  <symbol id="linechart" viewBox="0 0 16 16">
    <path d="M0 0h1v15h15v1H0V0Zm14.817 3.113a.5.5 0 0 1 .07.704l-4.5 5.5a.5.5 0 0 1-.74.037L7.06 6.767l-3.656 5.027a.5.5 0 0 1-.808-.588l4-5.5a.5.5 0 0 1 .758-.06l2.609 2.61 4.15-5.073a.5.5 0 0 1 .704-.07Z"></path>
  </symbol>
  <symbol id="playground" viewBox="0 0 16 16">
    <path d="M2,1.15c0.2091-0.8016,1.0284-1.2819,1.83-1.0729s1.2819,1.0284,1.0729,1.83C4.7026,2.6752,3.9386,3.1542,3.16,3&#xA;&#x9;C2.3474,2.839,1.8191,2.0498,1.98,1.2371C1.9858,1.2079,1.9925,1.1788,2,1.15z M13,12.32c0.1032,0.5426-0.2531,1.066-0.7956,1.1692&#xA;&#x9;c-0.0015,0.0003-0.0029,0.0006-0.0044,0.0008c-0.4252,0.086-0.8574-0.1119-1.07-0.49l0,0L9.45,9.63L8,9.92L7.78,10H7.72v2.15&#xA;&#x9;L8.34,12h0.14c0.2871,0.0054,0.5155,0.2425,0.5101,0.5297C8.9862,12.7361,8.8606,12.9207,8.67,13l-5,1l0,0&#xA;&#x9;c-0.0563,0.0095-0.1137,0.0095-0.17,0c-0.2872,0-0.52-0.2328-0.52-0.52c0-0.2099,0.1262-0.3993,0.32-0.48l0,0l4.15-0.83V10&#xA;&#x9;l-3.22,0.58l0,0c-0.164,0.0423-0.336,0.0423-0.5,0c-0.3394-0.0867-0.6088-0.3446-0.71-0.68H3L2,5.83l0,0&#xA;&#x9;C1.9688,5.6884,1.9688,5.5416,2,5.4c0.0936-0.387,0.4078-0.6815,0.8-0.75l0,0l4.7-0.52V0h0.22v4.1h0.06L8,4.08L8.4,4h0.21&#xA;&#x9;c0.2673,0.0643,0.4326,0.3323,0.37,0.6C8.9361,4.835,8.729,5.0041,8.49,5L8,5.08H7.78H7.72v2.86h0.06L8,7.88l1.81-0.36l0,0l0,0&#xA;&#x9;c0.4275-0.0352,0.8299,0.2062,1,0.6l0,0l2,3.94l0,0C12.887,12.1358,12.9511,12.2236,13,12.32z M7.5,5.13L5,5.4l0.74,2.94L7.5,8V5.13&#xA;&#x9;z"></path>
  </symbol>
  
</svg>

<main>
  <!--Navbar -->
  <div class="d-flex flex-column flex-shrink-0 p-3 text-white bg-dark" style="width: 280px;">
    <a class="d-flex align-items-center mb-3 mb-md-0 me-md-auto text-white text-decoration-none">
      <svg class="bi me-2" width="40" height="32"><use xlink:href="#googleplay"></use></svg>
      <span class="fs-4">Google Play Statistics</span>
    </a>
    <hr>
    <ul class="nav nav-pills flex-column mb-auto">
      <li>
        <a href="./barchart.html" class="nav-link text-white">
          <svg class="bi me-2" width="16" height="16"><use xlink:href="#barchart"></use></svg>
          Bar Chart
        </a>
      </li>
      <li>
        <a href="./linechart.html" class="nav-link text-white">
          <svg class="bi me-2" width="16" height="16"><use xlink:href="#linechart"></use></svg>
          Line Chart
        </a>
      </li>
      <li>
        <a href="./piechart.html" class="nav-link text-white">
          <svg class="bi me-2" width="16" height="16"><use xlink:href="#piechart"></use></svg>
          Pie Chart
        </a>
      </li>
      <li>
        <a href="./playground.html" class="nav-link text-white">
          <svg class="bi me-2" width="16" height="16"><use xlink:href="#playground"></use></svg>
          Playground
        </a>
      </li>
    </ul>
    <hr>
    <div class="dropdown">
      <a class="d-flex align-items-center text-white text-decoration-none dropdown-toggle" id="dropdownUser1" data-bs-toggle="dropdown" aria-expanded="false">
        <img src="https://thumbs.dreamstime.com/b/user-icon-flat-style-isolated-white-background-website-logo-mobile-app-ui-human-symbol-man-silhouette-social-member-sign-135109471.jpg" alt="" width="32" height="32" class="rounded-circle me-2">
        <strong>User</strong>
      </a>
    </div>
  </div>


  <div class="b-example-divider"></div>


  <div class="container" style="padding-top: 8px;"> 
    <div class="row">
      <div class="col">
        <select id="data" class="btn-toggle" onchange="update()">
          <option value="Rating" selected>Rating</option>
          <option value="Price">Price</option>
        </select>
      </div>
      <div class="col">
        <select id="sortOrder" class="btn-toggle" onchange="update()">
          <option value="ascending" >Ascending</option>
          <option value="descending">Descending</option>
          <option value="" selected>None</option>
        </select>
      </div>
      <div class="col text-right" style="padding-top: 8px;">
          <label class="form-label" for="cut">Cut</label>
      </div>
      <div class="col">
        <input type="number" id="cut" class="form-control" value="12" max="60" />
      </div>
    </div>
        
    <div class="row">
      <div class="col justify-content-center">
        <div id="my_dataviz"></div>
    </div>
  </div>
</div>


<!-- Add 2 buttons -->

</main>

<script>
  update()


document.getElementById("cut").addEventListener("change", update);

var data1 =[]
var data2 =[]
var data3 =[]
var data4 =[]

  

  const bar_color = "#69b3a2";

  function shadeColor(color, percent) {

    var R = parseInt(color.substring(1,3),16);
    var G = parseInt(color.substring(3,5),16);
    var B = parseInt(color.substring(5,7),16);

    R = parseInt(R * (100 + percent) / 100);
    G = parseInt(G * (100 + percent) / 100);
    B = parseInt(B * (100 + percent) / 100);

    R = (R<255)?R:255;  
    G = (G<255)?G:255;  
    B = (B<255)?B:255;  

    var RR = ((R.toString(16).length==1)?"0"+R.toString(16):R.toString(16));
    var GG = ((G.toString(16).length==1)?"0"+G.toString(16):G.toString(16));
    var BB = ((B.toString(16).length==1)?"0"+B.toString(16):B.toString(16));

    return "#"+RR+GG+BB;
}
// set the dimensions and margins of the graph
var margin = {top: 30, right: 30, bottom: 70, left: 60},
      width = 1100 - margin.left - margin.right,
      height = 700 - margin.top - margin.bottom;

// append the svg object to the body of the page
var svg = d3.select("#my_dataviz")
  .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform",
          "translate(" + margin.left + "," + margin.top + ")");

// X axis
var x = d3.scaleBand()
  .range([ 0, width ])
  .padding(0.2);
var xAxis = svg.append("g")
  .attr("transform", "translate(0," + height + ")")

// Initialize the Y axis
var y = d3.scaleLinear()
  .range([ height, 0]);
var yAxis = svg.append("g")
  .attr("class", "myYaxis")

  // A function that create / update the plot for a given variable:
  function update() {
    data_type = document.getElementById("data").value
    sort_order = document.getElementById("sortOrder").value
    cut = document.getElementById("cut").value
    for (let i = 0; i < 2; i++) {
      data = []

      console.log(data_type)
      console.log(sort_order)
      console.log(cut)
      d3.csv("https://gist.githubusercontent.com/JoaoBorgesUA/6473df7f4967b7324b13f4b2166aca03/raw/c47a684ae3dd69f5d3eb2317ad63234f4d4ab92c/gistfile1.txt", function(error, rows) {
        dataset = []
        dataset_sorted = []
          console.log(rows)
          rows.forEach(function(r) {

            if(+r[data_type]>0){
                if(r.Category in dataset ){
                  //console.log(dataset[r.Category])
                  dataset[r.Category].push(+r[data_type])
                }
                else{
                  dataset[r.Category] = [+r[data_type]]
                }
            }
          })

          Object.keys(dataset).forEach(function(a) {

            dataset_sorted.push({"Category": a, "y": d3.mean(dataset[a])})
/*             if (data_type === "Rating"){
              if(d3.mean(dataset[a]) > 0)
                dataset_sorted.push({"Category": a, "y": d3.mean(dataset[a])})

            }
            else{
              if(d3.sum(dataset[a]) > 0)
                dataset_sorted.push({"Category": a, "y": d3.sum(dataset[a])})
            } */
          }) 
          //console.log(dataset_sorted)
          
          sort(sort_order, dataset_sorted);

            data = dataset_sorted.slice(0,cut)

            

                  // X axis
          x.domain(data.map(function(d) { return d.Category; }))
          xAxis.transition().duration(1000).call(d3.axisBottom(x))
      
          // Add Y axis
          y.domain([0, d3.max(data, function(d) { return +d.y }) ]);
          yAxis.transition().duration(1000).call(d3.axisLeft(y));


          const tooltip = d3.select("main")
            .append("div")
            .attr("class","d3-tooltip")
            .style("position", "absolute")
            .style("z-index", "10")
            .style("visibility", "hidden")
            .style("padding", "15px")
            .style("background", "rgba(0,0,0,0.6)")
            .style("border-radius", "5px")
            .style("color", "#fff")
            .text("a simple tooltip");
      
          // variable u: map data to existing bars
          d3.selectAll("svg").transition().duration(1000)
          .selectAll("rect")
          .attr("height", 0)
          .remove();

          console.log(data)

          
          var u = svg.selectAll("rect")
            .data(data)
            console.log(data_type)
            console.log(data)

      
          // update bars

          u
            .enter()
            .append("rect")
            .merge(u)
            .attr("fill", bar_color)

            u.transition().duration(1000)
              .attr("width", x.bandwidth()) 
              .attr("height", d => height - y(d.y) )
              .attr("x", d => x(d.Category) )
              .attr("y", d => y(d.y) )

            u.on("mouseover", function(d)  {
              tooltip.html(`${d.Category} : ${Math.round(d.y  * 100 )/100}`).style("visibility", "visible");
              d3.select(this)
                .attr("fill", shadeColor(bar_color, -30));
            })
            .on("mousemove", function(){
              tooltip
                .style("top", (event.pageY-10)+"px")
                .style("left",(event.pageX+10)+"px");
            })
            .on("mouseout", function() {
              tooltip.html(``).style("visibility", "hidden");
              d3.select(this).attr("fill", bar_color);
            })
            ;

        });
      }
        
        function sort(d3Comparator,data) {
          if(d3Comparator) 
          data = data.sort(function(a, b) {
              return d3[d3Comparator](a.y, b.y);
          });
    }

  }


  
  // Initialize plot
  
  </script>
    <script src="./Sidebars Â· Bootstrap v5.0_files/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>

      <script src="./Sidebars Â· Bootstrap v5.0_files/sidebars.js"></script>
  

</body></html>